<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link id=favicon rel=icon type=image/x-icon href=/img/favicon.ico><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/github-markdown.min.css><link rel=stylesheet href=/css/addon.css><meta name=referrer content="no-referrer"><script src=https://unpkg.com/zooming/build/zooming.min.js></script><script>document.addEventListener('DOMContentLoaded',function(){new Zooming({scaleExtra:0.6,}).listen('.img-zoomable')})</script><style>@font-face{font-family:notosanssc;src:url(/css/NotoSansSC-Thin.ttf)}@font-face{font-family:roboto;src:url(/css/Roboto-Regular.ttf)}*{font-family:roboto,notosanssc!important}</style><title>我爱ETF</title></head><body><header id=header><h1><a href=/>我爱ETF</a></h1><nav class=sidebar-nav><a href=/dash/>仪表盘</a> |
<a href=/news/>文摘</a> |
<a href=/policies/>长赢</a> |
<a href=/books/>书单</a> |
<a href=/funds/>精品基金</a> |
<a href=/tools/>量化工具</a> |
<a href=/tags/>Tags</a> |
<a href=/blog/>博客</a> |
<a href=/about/>关于</a> |</nav></header><main id=main><article class="single markdown-body"><h1>Install Linux With Pen Drive</h1><h3>Thursday, Jan 1, 2009</h3><p><blockquote><p><strong>Note: I would recommend you use the <a href=http://unetbootin.sourceforge.net>unetbootin</a> to make the Linux bootable USB drive, since it is more easier (GUI) and convinience (auto-download distribution CD, auto-make boot flags). The below process just reach the same target, helping you understand what happened during the <code>unetbootin</code> process.</strong></p></blockquote><hr><p>In the very beginning, I thought it was really difficult to install a
linux from a USB, since it requires GRUB, kinds of alternative CD
media, and a &ldquo;special&rdquo; cd boot vmlinuz and initrd.gz files. Finally I
realise the power of GRUB, and it could boot anything, event a ISO
file.</p><h1 id=the-media>The Media</h1><p>You need a portable USB drive or pen drive, whose capacity is larger
than 1GB, and a computer with capability of boot sequence selection</p><p>Download the Linux distribution CD image.</p><h1 id=partition-it>Partition it</h1><ol><li><p>Identify the USB device</p><pre><code> # dmesg | grep /dev/
</code></pre></li><li><p>Use <code>fdisk</code> to format the partition</p><pre><code> # fdisk /dev/sdb (run it as root or sudo fdisk /dev/sdb)
 press &quot;n&quot; to create a new partition
 press &quot;p&quot; to create the primary partition
 press &quot;1&quot; to create the number 1 primary partion
 press &quot;p&quot; to view the current table, then you shall get the sdb1 now
 press &quot;a&quot;, then &quot;1&quot; to toggle the sdb1 as bootable
 press &quot;t&quot;, then &quot;c&quot; to change the system id as &quot;windows 95&quot;
 press &quot;w&quot;, save all of the partition information to the USB drive
</code></pre></li></ol><h1 id=prepare-the-file-system>Prepare the file system</h1><p>Using the ISO file to install the Linux, you shall use a &ldquo;FAT32&rdquo; partition to
save the ISO file, otherwise the ISO couldn&rsquo;t be seeked by the GRUB loader</p><pre><code>    # mkfs -t vfat /dev/sdb1 (replace sdb1 with your real media partition, do NOT be wrong)
    # mount /dev/sdb1 /mnt
    # cp ubuntu-11.04-desktop-i386.iso /mnt
</code></pre><p>or you can copy it from windows system, since the fat32 partition is working
under windows.</p><h1 id=install-the-grub>Install the GRUB</h1><p>GRUB is the bootloader, which will control how you start the OS, by ISO or by normal media</p><pre><code>    # mount /dev/sdb1 /mnt
    # grub-install --root-directory=/mnt /dev/sdb (replace sdb with your real USB drive id)
</code></pre><p>Now you got a bootable USB stick bearing the ubuntu installation media.</p><h1 id=begin-linux-boot>Begin Linux Boot</h1><ol><li><p>Plugin your USB dirve and boot your system</p></li><li><p>Press &ldquo;F12&rdquo; and select boot from USB/Flash drive</p></li><li><p>then you will get a &ldquo;grub>&rdquo; prompt and stopped, that&rsquo;s what we wanna</p></li><li><p>Configure the boot parameter</p><pre><code> grub&gt; ls
</code></pre><p>you will get a list of partitions including your local hard disk partition and
your USB partition. That&rsquo;s easily identified by the count of partition number,
like (hd0,1)(hd1,1)(hd1,2),(hd1,3),etc. we only have 1 partition on USB, so
(hd0,1) is the USB partition</p><pre><code> grub&gt; set root='(hd0,1)'
 grub&gt; loopback loop /ubuntu-11.04-desktop-i386.iso
 grub&gt; linux (loop)/casper/vmlinuz boot=casper iso-scan/filename=/ubuntu-11.04-desktop-i386.iso
 grub&gt; initrd (loop)/casper/initrd.lz
 grub&gt; boot
</code></pre></li></ol><h1 id=install-the-linux>Install the Linux</h1><p>After you boot into the <code>live CD desktop</code>, you can use the <code>install to harddisk</code> function to install the Linux copy to your local HDD or another USB drive.</p><h1 id=notes>Notes</h1><ol><li><p><code>loop</code> device</p><p>The loopback command will assign the &ldquo;loop&rdquo; as themedia file (iso)</p><p>Use the &ldquo;TAB&rdquo; key to let the <code>GRUB</code> to &ldquo;seek&rdquo; the possible files</p><p>E.g. initrd file here is the <code>initrd.lz</code> not <code>initrd.gz</code>, you can
use <code>TAB</code> after you typing the <code>initrd.</code>. The GRUB will
automatically seek the initrd.lz**</p></li><li><p>GRUB is so powerful to read ISO or file system right before system
&ldquo;booted&rdquo;</p></li><li><p>Use <code>FAT32</code> file system bearing the ISO file</p></li><li><p>You can using your existing <code>grub.cfg</code> (live system) to add the
installation menuentry.</p></li><li><p>Do NOT try to install a new system on the same USB drive where your
iso is</p></li><li><p>More examples of boot entry</p><pre><code> cat &lt;&lt;EOF&gt; /mnt/boot/grub/grub.cfg
 menuentry &quot;Ubuntu Live 9.10 32bit&quot; {
 loopback loop /boot/iso/ubuntu-9.10-desktop-i386.iso
 linux (loop)/casper/vmlinuz boot=casper iso-scan/filename=/boot/iso/ubuntu-9.10-desktop-i386.iso noeject noprompt --
 initrd (loop)/casper/initrd.lz
 }

 menuentry &quot;Ubuntu Live 9.10 64bit&quot; {
 loopback loop /boot/iso/ubuntu-9.10-desktop-amd64.iso
 linux (loop)/casper/vmlinuz boot=casper iso-scan/filename=/boot/iso/ubuntu-9.10-desktop-amd64.iso noeject noprompt --
 initrd (loop)/casper/initrd.lz
 }

 menuentry &quot;Grml small 2009.10&quot; {
 loopback loop /boot/iso/grml-small_2009.10.iso
 linux (loop)/boot/grmlsmall/linux26 findiso=/boot/iso/grml-small_2009.10.iso apm=power-off lang=us vga=791 boot=live nomce noeject noprompt --
 initrd (loop)/boot/grmlsmall/initrd.gz
 }

 menuentry &quot;tinycore&quot; {
 loopback loop /boot/iso/tinycore_2.3.1.iso
 linux (loop)/boot/bzImage --
 initrd (loop)/boot/tinycore.gz
 }

 menuentry &quot;Netinstall 32 preseed&quot; {
 loopback loop /boot/iso/mini.iso
 linux (loop)/linux auto url=http://www.panticz.de/pxe/preseed/preseed.seed locale=en_US console-setup/layoutcode=de netcfg/choose_interface=eth0 debconf/priority=critical --
 initrd (loop)/initrd.gz
 }

 menuentry &quot;debian-installer-amd64.iso&quot; {
 loopback loop /boot/iso/debian-installer-amd64.iso
 linux (loop)/linux vga=normal --
 initrd (loop)/initrd.gz
 }

 menuentry &quot;BackTrack 4&quot; {
 linux /boot/bt4/boot/vmlinuz BOOT=casper boot=casper nopersistent rw vga=0x317 --
 initrd /boot/bt4/boot/initrd.gz
 }

 menuentry &quot;Memory test (memtest86+)&quot; {
 linux16 /boot/img/memtest86+.bin
 }

 menuentry &quot;BackTrack ERR&quot; {
 loopback loop /boot/iso/bt4-pre-final.iso
 linux (loop)/boot/vmlinuz find_iso/filename=/boot/iso/bt4-pre-final.iso BOOT=casper boot=casper nopersistent rw vga=0x317--
 initrd (loop)/boot/initrd.gz
 }

 menuentry &quot;XBMC ERR&quot; {
 loopback loop /boot/iso/XBMCLive.iso
 linux (loop)/vmlinuz boot=cd isofrom=/dev/sda1/boot/iso/XBMCLive.iso xbmc=nvidia,nodiskmount,tempfs,setvolume loglevel=0 --
 initrd (loop)/initrd0.img
 }

 menuentry &quot;netboot.me&quot; {
 loopback loop /boot/iso/netbootme.iso
 linux16 (loop)/GPXE.KRN
 }

 menuentry &quot;debian installer amd64 netboot XEN pressed&quot; {
 linux /boot/debian/linux auto preseed/url=http://www.panticz.de/pxe/preseed/xen.seed locale=en_US console-setup/layoutcode=de netcfg/choose_interface=eth0 debconf/priority=critical --
 initrd /boot/debian/initrd.gz
 }
 EOF
</code></pre></li></ol><hr><p>Last Updated: Sep 06, 2013 23:10 Manil</p></p></div></article><article id=single><a href=http://52etf.net/blog/2019-08-01-use-free-and-open-source-software-to-organise-your-life-efficiently/>上一篇：Use FREE and Open-Source Software to Organise Your Life Efficiently</a></article><article class=single><strong>推荐目录：</strong>
<a class=item__tag href=/tags/linux>#Linux</a>
<a class=item__tag href=/tags/boot>#Boot</a>
<a class=item__tag href=/tags/lof>#LOF</a></article><script src=//unpkg.com/valine/dist/Valine.min.js></script><div id=vcomments></div><script>new Valine({el:'#vcomments',appId:'oc9Q6EXPyOTsTB1u3TF69zx5-gzGzoHsz',appKey:'K9hd59av2lhDkYwXfBGAHFdB',placeholder:'请您在评论时遵守国家法律法规，谢谢',visitor:false,})</script></main><footer id=footer><ol><li><a href=http://52etf.net>版权&copy;52etf.net</a></li><li><a href=https://creativecommons.org/licenses/by-sa/4.0/deed.zh>协议CC BY-SA 4.0</a></li><li><a href=http://www.beian.miit.gov.cn>豫ICP备20016066号</a></li></ol></footer></body></html>