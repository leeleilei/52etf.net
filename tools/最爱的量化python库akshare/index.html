<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link id=favicon rel=icon type=image/x-icon href=/img/favicon.ico><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/github-markdown.min.css><link rel=stylesheet href=/css/addon.css><script src=https://unpkg.com/zooming/build/zooming.min.js></script><script>document.addEventListener('DOMContentLoaded',function(){new Zooming({scaleExtra:0.6,}).listen('.img-zoomable')})</script><style>@font-face{font-family:notosanssc;src:url(/css/NotoSansSC-Thin.ttf)}@font-face{font-family:roboto;src:url(/css/Roboto-Regular.ttf)}*{font-family:roboto,notosanssc!important}</style><title>我爱ETF</title></head><body><header id=header><h1><a href=/>我爱ETF</a></h1><nav class=sidebar-nav><a href=/dash/>仪表盘</a> |
<a href=/news/>文摘</a> |
<a href=/policies/>长赢</a> |
<a href=/books/>书单</a> |
<a href=/funds/>精品基金</a> |
<a href=/tools/>量化工具</a> |
<a href=/tags/>Tags</a> |
<a href=/blog/>博客</a> |
<a href=/about/>关于</a> |</nav></header><main id=main><article class="single markdown-body"><h1>最爱的Python量化库：AkShare</h1><p><p>先来看介绍,</p><blockquote><p><a href=https://www.akshare.xyz/zh_CN/latest/introduction.html>AkShare</a> 是基于 Python 的财经数据接口库, 目的是实现对股票、期货、期权、基金、外汇、债券、指数、数字货币等金融产品的基本面数据、实时和历史行情数据、衍生数据从数据采集、数据清洗到数据落地的一套工具, 主要用于学术研究目的.</p></blockquote><blockquote><p>AkShare 的特点是获取的是相对权威的财经数据网站公布的原始数据, 通过利用原始数据进行各数据源之间的交叉验证, 进而再加工, 从而得出科学的结论.</p></blockquote><p>AkShare是一个非常平民化的财经数据接口库，实时性和准确度没有保证，不能用作量化炒股，但用作延迟研究和大周期决策是没有任何问题的。我们的资产配置、目标市值或者网格可以取其价格来做回测也非常合适。</p><p>最重要的，相比tushare或者商业数据源，AkShare完全开源免费，数据采用的是公开网站内容，不存在将来封闭或者不能用的问题。</p><p>Akshare支持的接口非常广，文档丰富，完美符合我的预期，</p><p><img src=https://jfds-1252952517.cos.ap-chengdu.myqcloud.com/akshare/readme/mindmap/AkShare.svg alt=功能图></p><p>对我们有用的接口主要有</p><ol><li>货币汇率，折算QDII价格和摩擦成本</li><li>市场波动率</li><li>市场利率（货币充裕度）</li><li>中美欧经济GPD/CPI/失业率/M2</li><li>沪深融资融券（市场热度）</li><li>黄金白银ETF持仓监控（市场信心）</li><li>中国宏观杠杆率</li><li>恐慌指数（极限情况）</li><li>基金管理人信息</li><li>公募基金数据</li><li>债券行情</li><li>沪深可转债</li><li>中美股票</li><li>新增股票账户（市场热度）</li><li>指数成分</li><li>南北向资金</li><li>资金流向</li><li>机构持股池</li></ol><p>还有大量期货指标数据，对我没什么用就不再列举。</p><p>通过以上数据接口，可以搭建所有我们需要的指标，再搭配回测框架（例如vnpy和聚宽）则可以测试策略的有效性。</p><h2 id=全球债券行情>全球债券行情</h2><p><img src=https://cdn.jsdelivr.net/gh/leeleilei/leeleilei.github.io/assets/images/20200614112350.png alt=20200614112350></p><p>除了线图外，使用ax.twinx添加一个副坐标沪深300作为对比图。</p><pre><code>#%matplotlib inline
import matplotlib.pyplot as plt
from mpl_finance import candlestick_ohlc
import matplotlib.dates as mdates
import akshare as ak
import urllib

import matplotlib.font_manager as fm
# 设置字体路径
path = '/usr/share/fonts/truetype/SimHei.ttf'
github_url = 'https://github.com/adobe-fonts/source-han-sans/blob/release/OTF/SimplifiedChinese/SourceHanSansSC-Normal.otf'
url = github_url + '?raw=true'  # You want the actual file, not some html

from tempfile import NamedTemporaryFile

response = urllib.request.urlopen(url)
f = NamedTemporaryFile(delete=False, suffix='.ttf')
f.write(response.read())
f.close()
fontprop = fm.FontProperties(fname=f.name, size=13)

years = mdates.YearLocator()   # every year
months = mdates.MonthLocator()  # every month
years_fmt = mdates.DateFormatter('%Y')


df = ak.bond_investing_global(country=&quot;中国&quot;, index_name=&quot;中国10年期国债&quot;, period=&quot;每月&quot;, start_date=&quot;1990-01-01&quot;, end_date=&quot;2020-06-13&quot;)
df = df[['收盘']]
df.reset_index(inplace=True)
import matplotlib.dates as mdates
df['日期'] = df['日期'].map(mdates.date2num)

fig, ax = plt.subplots(figsize=(20,5))

ax.plot(df['日期'], df['收盘'])

ax.xaxis_date()
ax.xaxis.set_major_locator(years)
ax.xaxis.set_minor_locator(months)
ax.xaxis.set_major_formatter(years_fmt)

ax.set_xlabel(xlabel='时间', fontproperties=fontprop)
ax.set_ylabel(ylabel='到期收益率', fontproperties=fontprop)
ax.legend(loc=0)
ax.grid(True)


stock_df = ak.stock_zh_index_daily(symbol=&quot;sh000300&quot;)
stock_df.reset_index(inplace=True)
stock_df['date'] = stock_df['date'].map(mdates.date2num)

ax2 = ax.twinx()
ax2.plot(stock_df['date'], stock_df['close'],
         color='red')
ax2.set_ylabel(ylabel='沪深300', fontproperties=fontprop)
ax2.legend(loc=0)

fig.suptitle('中国十年期国债收益率 v.s. 沪深300', fontproperties=fontprop, fontsize=16)
plt.show()

</code></pre><h2 id=尾声>尾声</h2><p>Akshare能提供资产配置所需的各类非实时数据（历史PEPB除外），接口清晰简单，数据源稳定无需维护和付费。我们再未来将会主要依靠Akshare来搭建我们的指标系统。</p></p></div><hr><strong>文章分类：</strong>
<a class=item__tag href=/tags/%E9%87%8F%E5%8C%96>#量化</a>
<a class=item__tag href=/tags/python>#python</a></article><article class=single><strong>推荐阅读:</strong><ul><li><a href=/tools/%E5%85%A8%E5%B8%82%E5%9C%BA%E6%8C%87%E6%95%B0%E5%AF%B9%E5%BA%94%E7%9A%84%E5%85%AC%E5%8B%9F%E5%9F%BA%E9%87%91%E5%88%97%E8%A1%A8/>全市场指数对应的公募基金列表</a></li></ul></article><script src=//unpkg.com/valine/dist/Valine.min.js></script><div id=vcomments></div><script>new Valine({el:'#vcomments',appId:'oc9Q6EXPyOTsTB1u3TF69zx5-gzGzoHsz',appKey:'K9hd59av2lhDkYwXfBGAHFdB',placeholder:'请您在评论时遵守国家法律法规，谢谢',visitor:false,})</script></main><footer id=footer><ol><li><a href=http://52etf.net>版权&copy;52etf.net</a></li><li><a href=https://creativecommons.org/licenses/by-sa/4.0/deed.zh>协议CC BY-SA 4.0</a></li><li><a href=http://www.beian.miit.gov.cn>豫ICP备20016066号</a></li></ol></footer></body></html>